/** Короткие названия месяцев */
const МЕСЯЦЫ = [
  "янв",
  "фев",
  "мар",
  "апр",
  "май",
  "июн",
  "июл",
  "авг",
  "сен",
  "окт",
  "ноя",
  "дек",
];

/**
 * Форматирует дату в относительный или абсолютный формат.
 * Примеры: "только что", "5м назад", "3ч назад", "вчера", "3 дня назад", "24 фев"
 */
export function форматДату(дата: string | Date): string {
  const объектДаты = typeof дата === "string" ? new Date(дата) : дата;
  const сейчас = new Date();
  const разницаМс = сейчас.getTime() - объектДаты.getTime();
  const разницаСек = Math.floor(разницаМс / 1000);
  const разницаМин = Math.floor(разницаСек / 60);
  const разницаЧас = Math.floor(разницаМин / 60);
  const разницаДней = Math.floor(разницаЧас / 24);

  if (разницаСек < 60) return "только что";
  if (разницаМин < 60) return `${разницаМин}м назад`;
  if (разницаЧас < 24) return `${разницаЧас}ч назад`;
  if (разницаДней === 1) return "вчера";
  if (разницаДней < 7) return `${разницаДней} дней назад`;

  const день = объектДаты.getDate();
  const месяц = МЕСЯЦЫ[объектДаты.getMonth()];
  return `${день} ${месяц}`;
}
